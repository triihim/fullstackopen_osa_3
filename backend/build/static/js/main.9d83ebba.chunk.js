(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),o=t(15),a=t.n(o),u=(t(20),t(5)),i=t(3),d=t(4),s=t.n(d),l="/api/persons",h=function(e){return s.a.post(l,e).then((function(e){return e.data}))},b=function(){return s.a.get(l).then((function(e){return e.data}))},f=function(e){return s.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))},j=function(e,n){return s.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=t(0),O=function(e){var n=e.value,t=e.handleChange;return Object(m.jsxs)("div",{children:["filter: ",Object(m.jsx)("input",{value:n,onChange:t})]})},g=function(e){var n=e.name,t=e.number,c=e.handleNameChange,r=e.handleNumberChange,o=e.handleSubmit;return Object(m.jsxs)("form",{onSubmit:o,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:c})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:t,onChange:r})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},C=function(e){var n=e.contacts,t=e.onDelete;return Object(m.jsx)("div",{children:n.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{children:[e.name," ",e.number]}),Object(m.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"})]},e.id)}))})},p=Object.freeze({ERROR:1,SUCCESS:2}),v=function(e){var n=e.content,t=n.isShown,c=n.type,r=n.message;if(!t)return null;var o=function(){return c===p.ERROR},a={background:o()?"pink":"lightgreen",color:o()?"red":"green",borderColor:o()?"red":"green",border:"1px solid"};return Object(m.jsx)("div",{style:a,children:Object(m.jsx)("p",{children:r})})},x=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),a=Object(i.a)(o,2),d=a[0],s=a[1],l=Object(c.useState)(""),x=Object(i.a)(l,2),S=x[0],w=x[1],R=Object(c.useState)(""),E=Object(i.a)(R,2),L=E[0],y=E[1],k=Object(c.useState)({isShown:!1}),D=Object(i.a)(k,2),U=D[0],N=D[1],P=function(){return!!S&&S.length>6},F=function(){s(""),w("")},A=function(e,n){N(Object(u.a)(Object(u.a)({},U),{},{isShown:!0,type:e,message:n})),setTimeout((function(){return N(Object(u.a)(Object(u.a)({},U),{},{isShown:!1}))}),3e3)};Object(c.useEffect)((function(){b().then((function(e){return r((function(n){return n.concat(e)}))})).catch(console.error)}),[]);var T=t&&t.filter((function(e){return e.name.toLowerCase().includes(L.toLowerCase())})).sort((function(e,n){return n.name.toLowerCase()<e.name.toLowerCase()?1:-1})),B=function(){t.find((function(e){return e.name.toLowerCase()===d.toLowerCase()}))?window.confirm("".concat(d," is already added to the phonebook. Update existing number?"))&&function(){var e=t.find((function(e){return e.name.toLowerCase()===d.toLowerCase()}));P()?j(e.id,{name:e.name,number:S}).then((function(n){r(t.filter((function(n){return n.id!==e.id})).concat(n)),F(),A(p.SUCCESS,"Updated the number of ".concat(e.name))})).catch((function(n){return A(p.ERROR,"Couldn't update the number of ".concat(e.name))})):alert("Provide a proper number")}():d&&d.length>0&&P()?h({name:d,number:S}).then((function(e){r(t.concat(e)),F(),A(p.SUCCESS,"Added contact: ".concat(e.name))})).catch((function(e){return A(p.ERROR,"Something went wrong in contact creation")})):alert("Please provide both the name and the number. Also, ensure the number is long enough")};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(v,{content:U}),Object(m.jsx)(O,{value:L,handleChange:function(e){return y(e.target.value)}}),Object(m.jsx)("h2",{children:"Add new contact"}),Object(m.jsx)(g,{name:d,number:S,handleNameChange:function(e){return s(e.target.value)},handleNumberChange:function(e){return w(e.target.value)},handleSubmit:function(e){return e.preventDefault()||B()}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(C,{contacts:T,onDelete:function(e){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&f(e).then((function(){r(t.filter((function(n){return n.id!==e}))),A(p.SUCCESS,"Deleted contact: ".concat(n.name))})).catch((function(e){return A(p.ERROR,"Couldn't delete ".concat(n.name,". Maybe the contact is already deleted"))}))}(e)}})]})},S=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,r=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(x,{})}),document.getElementById("root")),S()}},[[40,1,2]]]);
//# sourceMappingURL=main.9d83ebba.chunk.js.map