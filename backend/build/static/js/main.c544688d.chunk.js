(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),o=t(15),a=t.n(o),u=(t(20),t(5)),i=t(3),s=t(4),d=t.n(s),h="/api/persons",l=function(e){return d.a.post(h,e).then((function(e){return e.data}))},b=function(){return d.a.get(h).then((function(e){return e.data}))},j=function(e){return d.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},f=function(e,n){return d.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},m=t(0),O=function(e){var n=e.value,t=e.handleChange;return Object(m.jsxs)("div",{children:["filter: ",Object(m.jsx)("input",{value:n,onChange:t})]})},p=function(e){var n=e.name,t=e.number,r=e.handleNameChange,c=e.handleNumberChange,o=e.handleSubmit;return Object(m.jsxs)("form",{onSubmit:o,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:r})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:t,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},g=function(e){var n=e.contacts,t=e.onDelete;return Object(m.jsx)("div",{children:n.map((function(e){return Object(m.jsxs)("div",{children:[Object(m.jsxs)("span",{children:[e.name," ",e.number]}),Object(m.jsx)("button",{onClick:function(){return t(e.id)},children:"Delete"})]},e.id)}))})},v=Object.freeze({ERROR:1,SUCCESS:2}),C=function(e){var n=e.content,t=n.isShown,r=n.type,c=n.message;if(!t)return null;var o=function(){return r===v.ERROR},a={background:o()?"pink":"lightgreen",color:o()?"red":"green",borderColor:o()?"red":"green",border:"1px solid",padding:"10px"};return Object(m.jsx)("div",{style:a,children:Object(m.jsx)("p",{children:c})})},x=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),a=Object(i.a)(o,2),s=a[0],d=a[1],h=Object(r.useState)(""),x=Object(i.a)(h,2),S=x[0],w=x[1],R=Object(r.useState)(""),E=Object(i.a)(R,2),L=E[0],k=E[1],D=Object(r.useState)({isShown:!1}),y=Object(i.a)(D,2),U=y[0],N=y[1],P=function(){return!!S&&S.length>0},F=function(){d(""),w("")},A=function(e,n){N(Object(u.a)(Object(u.a)({},U),{},{isShown:!0,type:e,message:n})),setTimeout((function(){return N(Object(u.a)(Object(u.a)({},U),{},{isShown:!1}))}),3e3)};Object(r.useEffect)((function(){b().then((function(e){return c((function(n){return n.concat(e)}))})).catch(console.error)}),[]);var T=t&&t.filter((function(e){return e.name&&e.name.toLowerCase().includes(L.toLowerCase())})).sort((function(e,n){return n.name.toLowerCase()<e.name.toLowerCase()?1:-1})),B=function(){t.find((function(e){return e.name&&e.name.toLowerCase()===s.toLowerCase()}))?window.confirm("".concat(s," is already added to the phonebook. Update existing number?"))&&function(){var e=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()}));P()?f(e.id,{name:e.name,number:S}).then((function(n){c(t.filter((function(n){return n.id!==e.id})).concat(n)),F(),A(v.SUCCESS,"Updated the number of ".concat(e.name))})).catch((function(e){return A(v.ERROR,e.response.data.error)})):alert("Provide a proper number")}():s&&s.length>0&&P()?l({name:s,number:S}).then((function(e){c(t.concat(e)),F(),A(v.SUCCESS,"Added contact: ".concat(e.name))})).catch((function(e){return A(v.ERROR,e.response.data.error)})):alert("Please provide both the name and the number. Also, ensure the number is long enough")};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(C,{content:U}),Object(m.jsx)(O,{value:L,handleChange:function(e){return k(e.target.value)}}),Object(m.jsx)("h2",{children:"Add new contact"}),Object(m.jsx)(p,{name:s,number:S,handleNameChange:function(e){return d(e.target.value)},handleNumberChange:function(e){return w(e.target.value)},handleSubmit:function(e){return e.preventDefault()||B()}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(g,{contacts:T,onDelete:function(e){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&j(e).then((function(){c(t.filter((function(n){return n.id!==e}))),A(v.SUCCESS,"Deleted contact: ".concat(n.name))})).catch((function(e){return A(v.ERROR,e.response.data.error)}))}(e)}})]})},S=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),c(e),o(e),a(e)}))};a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(x,{})}),document.getElementById("root")),S()}},[[40,1,2]]]);
//# sourceMappingURL=main.c544688d.chunk.js.map